"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{51708:function(e,t,n){n.d(t,{E:function(){return p}});var a=n(3827),s=n(64090),r=n(26587),l=n(94830),c=n(38333),o=n(23356),i=n(22983),d=n(10166),u=n(94688),m=n(43897),h=n(25890),x=n(22169);function f(e){let{active:t,payload:n,label:s,currency:r="USD"}=e;if(!t||!n||0===n.length)return null;let l=n.find(e=>"balance"===e.dataKey),c=n.find(e=>"drawdown"===e.dataKey);return(0,a.jsxs)("div",{className:"bg-popover border border-border rounded-lg shadow-lg p-3 text-sm",children:[(0,a.jsx)("p",{className:"text-muted-foreground text-xs mb-2",children:s}),l&&(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Balance:"}),(0,a.jsx)("span",{className:"font-semibold",children:(0,x.xG)(l.value,r)})]}),c&&void 0!==c.value&&(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 mt-1",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Drawdown:"}),(0,a.jsxs)("span",{className:(0,x.cn)("font-semibold",c.value<0?"text-red-500":"text-muted-foreground"),children:[c.value.toFixed(2),"%"]})]})]})}function p(e){let{data:t,height:n=300,showDrawdown:p=!1,showGrid:j=!0,showTooltip:g=!0,animate:v=!0,className:y,currency:b="USD",startingBalance:N}=e,w=s.useMemo(()=>t.map(e=>({...e,date:"string"==typeof e.date?e.date:(0,h.WU)(e.date,"MMM d, yyyy"),balance:e.balance,drawdown:e.drawdown})),[t]),k=s.useMemo(()=>{if(0===w.length)return[0,100];let e=w.map(e=>e.balance),t=Math.min(...e),n=Math.max(...e),a=(n-t)*.1;return[Math.floor(t-a),Math.ceil(n+a)]},[w]),M=s.useMemo(()=>{var e,t,n,a;if(0===w.length)return!0;let s=null!==(n=null!=N?N:null===(e=w[0])||void 0===e?void 0:e.balance)&&void 0!==n?n:0;return(null!==(a=null===(t=w[w.length-1])||void 0===t?void 0:t.balance)&&void 0!==a?a:0)>=s},[w,N]),E=s.useId(),z=s.useId();return 0===w.length?(0,a.jsx)("div",{className:(0,x.cn)("flex items-center justify-center text-muted-foreground",y),style:{height:n},children:"No data available"}):(0,a.jsx)("div",{className:(0,x.cn)("w-full",y),style:{height:n},children:(0,a.jsx)(r.h,{width:"100%",height:"100%",children:(0,a.jsxs)(l.T,{data:w,margin:{top:10,right:10,left:0,bottom:0},children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:E,x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:M?"hsl(142, 76%, 36%)":"hsl(0, 84%, 60%)",stopOpacity:.3}),(0,a.jsx)("stop",{offset:"95%",stopColor:M?"hsl(142, 76%, 36%)":"hsl(0, 84%, 60%)",stopOpacity:0})]}),p&&(0,a.jsxs)("linearGradient",{id:z,x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"hsl(0, 84%, 60%)",stopOpacity:.2}),(0,a.jsx)("stop",{offset:"95%",stopColor:"hsl(0, 84%, 60%)",stopOpacity:0})]})]}),j&&(0,a.jsx)(c.q,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",vertical:!1}),(0,a.jsx)(o.K,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},tickMargin:8,minTickGap:50}),(0,a.jsx)(i.B,{domain:k,axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},tickMargin:8,tickFormatter:e=>(0,x.xG)(e,b),width:80}),g&&(0,a.jsx)(d.u,{content:(0,a.jsx)(f,{currency:b}),cursor:{stroke:"hsl(var(--muted-foreground))",strokeWidth:1,strokeDasharray:"4 4"}}),N&&(0,a.jsx)(u.d,{y:N,stroke:"hsl(var(--muted-foreground))",strokeDasharray:"3 3",strokeOpacity:.5}),(0,a.jsx)(m.u,{type:"monotone",dataKey:"balance",stroke:M?"hsl(142, 76%, 36%)":"hsl(0, 84%, 60%)",strokeWidth:2,fill:"url(#".concat(E,")"),isAnimationActive:v,animationDuration:1e3,animationEasing:"ease-out"})]})})})}},20966:function(e,t,n){n.d(t,{$:function(){return m}});var a=n(3827),s=n(64090),r=n(74395),l=n(96396),c=n(53348),o=n(44715),i=n(52235),d=n(22169),u=n(575);function m(e){let{isOpen:t,onClose:n,title:m,subtitle:h,children:x,onDownload:f}=e,[p,j]=s.useState(1),g=s.useRef(null);return(s.useEffect(()=>{let e=e=>{"Escape"===e.key&&t&&n()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,n]),s.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),t)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:e=>{e.target===e.currentTarget&&n()},children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm"}),(0,a.jsxs)("div",{ref:g,className:(0,d.cn)("relative z-10 w-[95vw] h-[90vh] max-w-[1800px]","bg-card border border-border rounded-xl shadow-2xl","flex flex-col overflow-hidden","animate-in fade-in-0 zoom-in-95 duration-200"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border bg-card/50",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:m}),h&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-0.5",children:h})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 mr-2 px-2 py-1 rounded-md bg-muted/50",children:[(0,a.jsx)(u.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{j(e=>Math.max(e-.25,.5))},disabled:p<=.5,title:"Zoom out",children:(0,a.jsx)(r.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground w-12 text-center",children:[Math.round(100*p),"%"]}),(0,a.jsx)(u.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{j(e=>Math.min(e+.25,2))},disabled:p>=2,title:"Zoom in",children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})}),(0,a.jsx)(u.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{j(1)},disabled:1===p,title:"Reset zoom",children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})]}),f&&(0,a.jsxs)(u.z,{variant:"outline",size:"sm",onClick:f,className:"gap-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),"Download"]}),(0,a.jsx)(u.z,{variant:"ghost",size:"icon",className:"h-9 w-9 ml-2",onClick:n,title:"Close (Esc)",children:(0,a.jsx)(i.Z,{className:"h-5 w-5"})})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto p-6",children:(0,a.jsx)("div",{className:"w-full h-full min-h-[500px] transition-transform duration-200",style:{transform:"scale(".concat(p,")"),transformOrigin:"top left"},children:x})})]})]}):null}},50012:function(e,t,n){n.d(t,{D:function(){return f}});var a=n(3827);n(64090);var s=n(26587),r=n(81433),l=n(38333),c=n(23356),o=n(22983),i=n(10166),d=n(94688),u=n(78720),m=n(74994),h=n(22169);function x(e){let{active:t,payload:n,label:s,currency:r="USD"}=e;if(!t||!n||!n.length)return null;let l=n[0].payload,c=l.pnl>=0;return(0,a.jsxs)("div",{className:"bg-popover border border-border rounded-lg shadow-lg p-3 min-w-[160px]",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground mb-2",children:s}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"P&L"}),(0,a.jsxs)("span",{className:(0,h.cn)("text-sm font-semibold",c?"text-green-500":"text-red-500"),children:[c?"+":"",(0,h.xG)(l.pnl,r)]})]}),void 0!==l.trades&&(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Trades"}),(0,a.jsx)("span",{className:"text-sm text-foreground",children:l.trades})]}),void 0!==l.winRate&&(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Win Rate"}),(0,a.jsxs)("span",{className:"text-sm text-foreground",children:[l.winRate.toFixed(1),"%"]})]})]})]})}function f(e){let{data:t,height:n=300,showGrid:f=!0,showTooltip:p=!0,animate:j=!0,className:g,profitColor:v="#10B981",lossColor:y="#EF4444",currency:b="USD"}=e;if(!t||0===t.length)return(0,a.jsx)("div",{className:(0,h.cn)("flex items-center justify-center text-muted-foreground",g),style:{height:n},children:(0,a.jsx)("p",{className:"text-sm",children:"No monthly data available"})});let N=Math.max(...t.map(e=>Math.abs(e.pnl)));return(0,a.jsx)("div",{className:(0,h.cn)("w-full",g),style:{height:n},children:(0,a.jsx)(s.h,{width:"100%",height:"100%",children:(0,a.jsxs)(r.v,{data:t,margin:{top:10,right:10,left:10,bottom:0},children:[f&&(0,a.jsx)(l.q,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",vertical:!1}),(0,a.jsx)(c.K,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"},dy:10}),(0,a.jsx)(o.B,{domain:[-(1.1*N),1.1*N],axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"},tickFormatter:e=>Math.abs(e)>=1e3?"".concat((e/1e3).toFixed(0),"k"):"".concat(e),width:60}),p&&(0,a.jsx)(i.u,{content:(0,a.jsx)(x,{currency:b}),cursor:{fill:"hsl(var(--accent))",opacity:.3}}),(0,a.jsx)(d.d,{y:0,stroke:"hsl(var(--border))",strokeWidth:1}),(0,a.jsx)(u.$,{dataKey:"pnl",radius:[4,4,0,0],isAnimationActive:j,animationDuration:500,animationEasing:"ease-out",children:t.map((e,t)=>(0,a.jsx)(m.b,{fill:e.pnl>=0?v:y,fillOpacity:.9},"cell-".concat(t)))})]})})})}},65717:function(e,t,n){n.d(t,{y:function(){return N}});var a=n(3827),s=n(64090),r=n(26587),l=n(94830),c=n(38333),o=n(23356),i=n(22983),d=n(10166),u=n(94866),m=n(43897),h=n(25890),x=n(22169),f=n(5080),p=n(575),j=n(23441),g=n(80037);let v=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16"];function y(e){let{active:t,payload:n,label:s,currency:r,formatAmount:l}=e;return t&&n&&0!==n.length?(0,a.jsxs)("div",{className:"bg-popover border border-border rounded-lg shadow-lg p-3 text-sm",children:[(0,a.jsx)("p",{className:"text-muted-foreground text-xs mb-2 font-medium",children:s}),(0,a.jsx)("div",{className:"space-y-1.5",children:n.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:e.color}}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:[e.name,":"]})]}),(0,a.jsx)("span",{className:"font-semibold",children:l(e.value,r)})]},t))})]}):null}function b(e){let{accounts:t,selectedIds:n,onSelectionChange:r,showAllOption:l=!0,allLabel:c="All Accounts (Converted)"}=e,[o,i]=s.useState(!1),d=s.useRef(null);s.useEffect(()=>{function e(e){d.current&&!d.current.contains(e.target)&&i(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let u=0===n.length,m=u?t.length:n.length,h=e=>{n.includes(e)?r(n.filter(t=>t!==e)):r([...n,e])};return(0,a.jsxs)("div",{className:"relative",ref:d,children:[(0,a.jsxs)(p.z,{variant:"outline",size:"sm",onClick:()=>i(!o),className:"gap-2 min-w-[180px] justify-between",children:[(0,a.jsx)("span",{className:"truncate",children:(()=>{if(u)return c;if(1===n.length){let e=t.find(e=>e.id===n[0]);return e?"".concat(e.name).concat(e.currency?" (".concat(e.currency,")"):""):"Select Account"}return"".concat(m," accounts selected")})()}),(0,a.jsx)(j.Z,{className:(0,x.cn)("h-4 w-4 opacity-50 transition-transform flex-shrink-0",o&&"rotate-180")})]}),o&&(0,a.jsx)("div",{className:"absolute z-50 mt-1 w-full min-w-[220px] rounded-md border border-border bg-popover shadow-md animate-in fade-in-0 zoom-in-95",children:(0,a.jsxs)("div",{className:"p-1 max-h-[300px] overflow-auto",children:[l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{type:"button",onClick:()=>{r([])},className:(0,x.cn)("flex w-full items-center gap-2 rounded-sm px-2 py-1.5 text-sm","hover:bg-accent hover:text-accent-foreground",u&&"bg-accent"),children:[(0,a.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:u&&(0,a.jsx)(g.Z,{className:"h-4 w-4 text-primary"})}),(0,a.jsx)("span",{className:"flex-1 text-left",children:c})]}),(0,a.jsx)("div",{className:"my-1 h-px bg-border"})]}),t.map(e=>{let t=n.includes(e.id);return(0,a.jsxs)("button",{type:"button",onClick:()=>h(e.id),className:(0,x.cn)("flex w-full items-center gap-2 rounded-sm px-2 py-1.5 text-sm","hover:bg-accent hover:text-accent-foreground",t&&!u&&"bg-accent"),children:[(0,a.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:t&&!u&&(0,a.jsx)(g.Z,{className:"h-4 w-4 text-primary"})}),(0,a.jsx)("span",{className:"flex-1 text-left",children:e.name}),e.currency&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.currency})]},e.id)})]})})]})}function N(e){let{series:t,total:n,height:p=400,showTotal:j=!0,showLegend:g=!0,showGrid:N=!0,showTooltip:w=!0,animate:k=!0,className:M}=e,{formatAmount:E,showConverted:z,defaultCurrency:C,convert:L}=(0,f.ux)(),[S,A]=s.useState([]),D=s.useMemo(()=>{let e=new Set;return t.forEach(t=>{t.currency&&e.add(t.currency)}),Array.from(e)},[t]).length>1,F=s.useMemo(()=>0===S.length?"converted":1===S.length||1===new Set(t.filter(e=>S.includes(e.accountId)).map(e=>e.currency)).size?"native":"converted",[S,t]),B=s.useMemo(()=>{if("converted"===F)return C;if(1===S.length){let e=t.find(e=>e.accountId===S[0]);return(null==e?void 0:e.currency)||C}let e=t.find(e=>S.includes(e.accountId));return(null==e?void 0:e.currency)||C},[F,S,t,C]),K=s.useMemo(()=>0===S.length?t:t.filter(e=>S.includes(e.accountId)),[t,S]),T=s.useCallback((e,t)=>{if("native"===F||!t||t===B)return e;let n=L(e,t,B);return null!=n?n:e},[F,B,L]),I=s.useMemo(()=>{let e=new Set;K.forEach(t=>{t.data.forEach(t=>{e.add(t.date)})});let t=Array.from(e).sort((e,t)=>new Date(e).getTime()-new Date(t).getTime()),a=new Map;K.forEach(e=>{let t=new Map;e.data.forEach(n=>{let a=T(n.balance,e.currency);t.set(n.date,a)}),a.set(e.accountName,t)});let s=[],r=new Map;return t.forEach(e=>{let t={date:e};K.forEach(n=>{let s=a.get(n.accountName);if(null==s?void 0:s.has(e)){let a=s.get(e);t[n.accountName]=a,r.set(n.accountName,a)}else r.has(n.accountName)&&(t[n.accountName]=r.get(n.accountName))}),s.push(t)}),j&&(null==n?void 0:n.data)&&0===S.length&&s.forEach(e=>{let t=0,n=!1;K.forEach(a=>{let s=e[a.accountName];"number"==typeof s&&(t+=s,n=!0)}),n&&(e.Total=t)}),s},[K,n,j,S,T]),W=s.useMemo(()=>{let e=K.map(e=>e.accountName);return j&&n&&0===S.length&&e.push("Total"),e},[K,n,j,S]),R=s.useMemo(()=>{if(0===I.length)return[0,100];let e=1/0,t=-1/0;I.forEach(n=>{W.forEach(a=>{let s=n[a];"number"==typeof s&&(e=Math.min(e,s),t=Math.max(t,s))})}),e===1/0&&(e=0),t===-1/0&&(t=100);let n=(t-e)*.1;return[Math.floor(e-n),Math.ceil(t+n)]},[I,W]),Z=s.useMemo(()=>t.map(e=>({id:e.accountId,name:e.accountName,currency:e.currency})),[t]);return 0===I.length?(0,a.jsx)("div",{className:(0,x.cn)("flex items-center justify-center text-muted-foreground",M),style:{height:p},children:"No data available"}):(0,a.jsxs)("div",{className:(0,x.cn)("w-full",M),children:[D&&t.length>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4 px-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(b,{accounts:Z,selectedIds:S,onSelectionChange:A,allLabel:"All Accounts (".concat(C,")")}),"converted"===F&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Values converted to ",B]})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:B})]}),(0,a.jsx)("div",{style:{height:p},children:(0,a.jsx)(r.h,{width:"100%",height:"100%",children:(0,a.jsxs)(l.T,{data:I,margin:{top:10,right:10,left:0,bottom:0},children:[(0,a.jsx)("defs",{children:W.map((e,t)=>{let n="Total"===e?"#6B7280":v[t%v.length];return(0,a.jsxs)("linearGradient",{id:"gradient-".concat(e.replace(/\s+/g,"-")),x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:n,stopOpacity:.3}),(0,a.jsx)("stop",{offset:"95%",stopColor:n,stopOpacity:0})]},e)})}),N&&(0,a.jsx)(c.q,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",vertical:!1}),(0,a.jsx)(o.K,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},tickMargin:8,tickFormatter:e=>{try{let t=new Date(e);return(0,h.WU)(t,"MMM d")}catch(t){return e}},minTickGap:50}),(0,a.jsx)(i.B,{domain:R,axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},tickMargin:8,tickFormatter:e=>E(e,B),width:80}),w&&(0,a.jsx)(d.u,{content:(0,a.jsx)(y,{currency:B,formatAmount:E}),cursor:{stroke:"hsl(var(--muted-foreground))",strokeWidth:1,strokeDasharray:"4 4"}}),g&&(0,a.jsx)(u.D,{verticalAlign:"top",height:36,formatter:e=>(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e})}),j&&n&&0===S.length&&(0,a.jsx)(m.u,{type:"monotone",dataKey:"Total",name:"Total",stroke:"#6B7280",strokeWidth:2,strokeDasharray:"5 5",fill:"url(#gradient-Total)",isAnimationActive:k,animationDuration:1e3,animationEasing:"ease-out"}),K.map((e,t)=>{let n=v[t%v.length];return(0,a.jsx)(m.u,{type:"monotone",dataKey:e.accountName,name:e.accountName,stroke:n,strokeWidth:2,fill:"url(#gradient-".concat(e.accountName.replace(/\s+/g,"-"),")"),isAnimationActive:k,animationDuration:1e3,animationEasing:"ease-out"},e.accountId)})]})})})]})}},19729:function(e,t,n){n.d(t,{H:function(){return N}});var a=n(3827),s=n(64090),r=n(26587),l=n(81433),c=n(38333),o=n(23356),i=n(22983),d=n(10166),u=n(94688),m=n(94866),h=n(78720),x=n(22169),f=n(5080),p=n(575),j=n(23441),g=n(80037);let v=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16"];function y(e){let{active:t,payload:n,label:s,currency:r,formatAmount:l}=e;return t&&n&&0!==n.length?(0,a.jsxs)("div",{className:"bg-popover border border-border rounded-lg shadow-lg p-3 min-w-[180px]",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground mb-2",children:s}),(0,a.jsx)("div",{className:"space-y-1.5",children:n.map((e,t)=>{let n=e.value>=0;return(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.name})]}),(0,a.jsxs)("span",{className:(0,x.cn)("text-sm font-semibold",n?"text-green-500":"text-red-500"),children:[n?"+":"",l(e.value,r)]})]},t)})})]}):null}function b(e){let{accounts:t,selectedIds:n,onSelectionChange:r,showAllOption:l=!0,allLabel:c="All Accounts (Converted)"}=e,[o,i]=s.useState(!1),d=s.useRef(null);s.useEffect(()=>{function e(e){d.current&&!d.current.contains(e.target)&&i(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let u=0===n.length,m=u?t.length:n.length,h=e=>{n.includes(e)?r(n.filter(t=>t!==e)):r([...n,e])};return(0,a.jsxs)("div",{className:"relative",ref:d,children:[(0,a.jsxs)(p.z,{variant:"outline",size:"sm",onClick:()=>i(!o),className:"gap-2 min-w-[180px] justify-between",children:[(0,a.jsx)("span",{className:"truncate",children:(()=>{if(u)return c;if(1===n.length){let e=t.find(e=>e.id===n[0]);return e?"".concat(e.name).concat(e.currency?" (".concat(e.currency,")"):""):"Select Account"}return"".concat(m," accounts selected")})()}),(0,a.jsx)(j.Z,{className:(0,x.cn)("h-4 w-4 opacity-50 transition-transform flex-shrink-0",o&&"rotate-180")})]}),o&&(0,a.jsx)("div",{className:"absolute z-50 mt-1 w-full min-w-[220px] rounded-md border border-border bg-popover shadow-md animate-in fade-in-0 zoom-in-95",children:(0,a.jsxs)("div",{className:"p-1 max-h-[300px] overflow-auto",children:[l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{type:"button",onClick:()=>{r([])},className:(0,x.cn)("flex w-full items-center gap-2 rounded-sm px-2 py-1.5 text-sm","hover:bg-accent hover:text-accent-foreground",u&&"bg-accent"),children:[(0,a.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:u&&(0,a.jsx)(g.Z,{className:"h-4 w-4 text-primary"})}),(0,a.jsx)("span",{className:"flex-1 text-left",children:c})]}),(0,a.jsx)("div",{className:"my-1 h-px bg-border"})]}),t.map(e=>{let t=n.includes(e.id);return(0,a.jsxs)("button",{type:"button",onClick:()=>h(e.id),className:(0,x.cn)("flex w-full items-center gap-2 rounded-sm px-2 py-1.5 text-sm","hover:bg-accent hover:text-accent-foreground",t&&!u&&"bg-accent"),children:[(0,a.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:t&&!u&&(0,a.jsx)(g.Z,{className:"h-4 w-4 text-primary"})}),(0,a.jsx)("span",{className:"flex-1 text-left",children:e.name}),e.currency&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.currency})]},e.id)})]})})]})}function N(e){let{series:t,total:n,height:p=400,showTotal:j=!1,showLegend:g=!0,showGrid:N=!0,showTooltip:w=!0,animate:k=!0,stacked:M=!0,className:E}=e,{formatAmount:z,defaultCurrency:C,convert:L}=(0,f.ux)(),[S,A]=s.useState([]),D=s.useMemo(()=>{let e=new Set;return t.forEach(t=>{t.currency&&e.add(t.currency)}),Array.from(e)},[t]).length>1,F=s.useMemo(()=>0===S.length?"converted":1===S.length||1===new Set(t.filter(e=>S.includes(e.accountId)).map(e=>e.currency)).size?"native":"converted",[S,t]),B=s.useMemo(()=>{if("converted"===F)return C;if(1===S.length){let e=t.find(e=>e.accountId===S[0]);return(null==e?void 0:e.currency)||C}let e=t.find(e=>S.includes(e.accountId));return(null==e?void 0:e.currency)||C},[F,S,t,C]),K=s.useMemo(()=>0===S.length?t:t.filter(e=>S.includes(e.accountId)),[t,S]),T=s.useCallback((e,t)=>{if("native"===F||!t||t===B)return e;let n=L(e,t,B);return null!=n?n:e},[F,B,L]),I=s.useMemo(()=>{let e=new Map,t=new Set;K.forEach(e=>{e.data.forEach(e=>{t.add(e.month_key||e.month)})}),(null==n?void 0:n.data)&&0===S.length&&n.data.forEach(e=>{t.add(e.month_key||e.month)}),Array.from(t).sort().forEach(t=>{e.set(t,{month:t})});let a=Array.from(t).sort();return K.forEach(t=>{a.forEach(n=>{let a=e.get(n);a&&void 0===a[t.accountName]&&(a[t.accountName]=0)}),t.data.forEach(n=>{let a=n.month_key||n.month,s=e.get(a);if(s){let e=T(n.pnl,t.currency);s[t.accountName]=e,n.month&&n.month.length<=3&&(s.month=n.month)}})}),j&&(null==n?void 0:n.data)&&0===S.length&&Array.from(e.keys()).forEach(t=>{let n=e.get(t),a=0;K.forEach(e=>{let t=n[e.accountName];"number"==typeof t&&(a+=t)}),n.Total=a}),Array.from(e.values()).sort((e,t)=>{let n=e.month,a=t.month;return n.localeCompare(a)})},[K,n,j,S,T]),W=s.useMemo(()=>{let e=K.map(e=>e.accountName);return j&&n&&0===S.length&&e.push("Total"),e},[K,n,j,S]),R=s.useMemo(()=>{if(0===I.length)return[-100,100];let e=0,t=0;I.forEach(n=>{if(M){let a=0,s=0;K.forEach(e=>{let t=n[e.accountName];"number"==typeof t&&(t>=0?a+=t:s+=t)}),t=Math.max(t,a),e=Math.min(e,s)}else W.forEach(a=>{let s=n[a];"number"==typeof s&&(t=Math.max(t,s),e=Math.min(e,s))})});let n=.1*Math.max(Math.abs(t),Math.abs(e));return[Math.floor(e-n),Math.ceil(t+n)]},[I,W,K,M]),Z=s.useMemo(()=>t.map(e=>({id:e.accountId,name:e.accountName,currency:e.currency})),[t]);return 0===I.length?(0,a.jsx)("div",{className:(0,x.cn)("flex items-center justify-center text-muted-foreground",E),style:{height:p},children:"No data available"}):(0,a.jsxs)("div",{className:(0,x.cn)("w-full",E),children:[D&&t.length>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4 px-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(b,{accounts:Z,selectedIds:S,onSelectionChange:A,allLabel:"All Accounts (".concat(C,")")}),"converted"===F&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Values converted to ",B]})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:B})]}),(0,a.jsx)("div",{style:{height:p},children:(0,a.jsx)(r.h,{width:"100%",height:"100%",children:(0,a.jsxs)(l.v,{data:I,margin:{top:10,right:10,left:10,bottom:0},children:[N&&(0,a.jsx)(c.q,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",vertical:!1}),(0,a.jsx)(o.K,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"},dy:10}),(0,a.jsx)(i.B,{domain:R,axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"},tickFormatter:e=>Math.abs(e)>=1e3?"".concat((e/1e3).toFixed(0),"k"):"".concat(e),width:60}),w&&(0,a.jsx)(d.u,{content:(0,a.jsx)(y,{currency:B,formatAmount:z}),cursor:{fill:"hsl(var(--accent))",opacity:.3}}),(0,a.jsx)(u.d,{y:0,stroke:"hsl(var(--border))",strokeWidth:1}),g&&(0,a.jsx)(m.D,{verticalAlign:"top",height:36,formatter:e=>(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e})}),K.map((e,t)=>{let n=v[t%v.length];return(0,a.jsx)(h.$,{dataKey:e.accountName,name:e.accountName,fill:n,fillOpacity:.9,radius:M?[0,0,0,0]:[4,4,0,0],stackId:M?"stack":void 0,isAnimationActive:k,animationDuration:500,animationEasing:"ease-out"},e.accountId)}),j&&n&&!M&&0===S.length&&(0,a.jsx)(h.$,{dataKey:"Total",name:"Total",fill:"#6B7280",fillOpacity:.7,radius:[4,4,0,0],isAnimationActive:k,animationDuration:500,animationEasing:"ease-out"})]})})})]})}},23148:function(e,t,n){n.d(t,{uK:function(){return j}});var a=n(3827);n(64090);var s=n(26587),r=n(81433),l=n(38333),c=n(23356),o=n(22983),i=n(10166),d=n(94866),u=n(78720),m=n(74994),h=n(71594),x=n(22169);let f={win:"#10B981",loss:"#EF4444",bar:"#3B82F6"};function p(e){let{active:t,payload:n,label:s}=e;if(!t||!n||0===n.length)return null;let r=n[0].payload;return(0,a.jsxs)("div",{className:"bg-popover border border-border rounded-lg shadow-lg p-3 text-sm",children:[(0,a.jsx)("p",{className:"font-medium text-foreground mb-2",children:s}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Win Rate:"}),(0,a.jsxs)("span",{className:"font-medium text-foreground",children:[r.winRate.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("span",{className:"text-green-500",children:"Wins:"}),(0,a.jsx)("span",{className:"font-medium",children:r.wins})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("span",{className:"text-red-500",children:"Losses:"}),(0,a.jsx)("span",{className:"font-medium",children:r.losses})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 pt-1 border-t border-border",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Total:"}),(0,a.jsxs)("span",{className:"font-medium",children:[r.trades," trades"]})]})]})]})}function j(e){let{data:t,height:n=300,showLegend:j=!1,showLabels:g=!0,className:v,layout:y="horizontal",colors:b=f}=e;if(!t||0===t.length)return(0,a.jsx)("div",{className:(0,x.cn)("flex items-center justify-center text-muted-foreground",v),style:{height:n},children:(0,a.jsx)("p",{className:"text-sm",children:"No data available"})});let N="vertical"===y;return(0,a.jsx)("div",{className:(0,x.cn)("w-full",v),style:{height:n},children:(0,a.jsx)(s.h,{width:"100%",height:"100%",children:(0,a.jsxs)(r.v,{data:t,layout:N?"vertical":"horizontal",margin:{top:20,right:30,left:N?80:20,bottom:5},children:[(0,a.jsx)(l.q,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",horizontal:!N,vertical:N}),N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.K,{type:"number",domain:[0,100],tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},tickLine:{stroke:"hsl(var(--border))"},axisLine:{stroke:"hsl(var(--border))"},tickFormatter:e=>"".concat(e,"%")}),(0,a.jsx)(o.B,{type:"category",dataKey:"name",tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},tickLine:{stroke:"hsl(var(--border))"},axisLine:{stroke:"hsl(var(--border))"},width:70})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.K,{dataKey:"name",tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},tickLine:{stroke:"hsl(var(--border))"},axisLine:{stroke:"hsl(var(--border))"}}),(0,a.jsx)(o.B,{domain:[0,100],tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},tickLine:{stroke:"hsl(var(--border))"},axisLine:{stroke:"hsl(var(--border))"},tickFormatter:e=>"".concat(e,"%")})]}),(0,a.jsx)(i.u,{content:(0,a.jsx)(p,{}),cursor:{fill:"hsl(var(--accent))",opacity:.3}}),j&&(0,a.jsx)(d.D,{wrapperStyle:{paddingTop:"10px"}}),(0,a.jsxs)(u.$,{dataKey:"winRate",name:"Win Rate",radius:[4,4,0,0],maxBarSize:60,children:[t.map((e,t)=>{var n;return(0,a.jsx)(m.b,{fill:(n=e.winRate)>=60?"#10B981":n>=50?"#3B82F6":n>=40?"#F59E0B":"#EF4444"},"cell-".concat(t))}),g&&(0,a.jsx)(h.e,{dataKey:"winRate",position:N?"right":"top",formatter:e=>"".concat(e.toFixed(0),"%"),fill:"hsl(var(--foreground))",fontSize:11,fontWeight:500})]}),(0,a.jsx)(l.q,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground))",strokeOpacity:.5})]})})})}}}]);